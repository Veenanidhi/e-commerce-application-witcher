<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add product</title>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" data-th-href="@{'/css/style.css'}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                clifford: '#da373d',
              }
            }
          }
        }
    </script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp,container-queries"></script>
    <style type="text/tailwindcss">
        @layer utilities {
          .content-auto {
            content-visibility: auto;
          }
        }
    </style>
</head>

<body class="bg-gray-100">
<div class="flex">
    <!-- Sidebar -->

    <aside class="w-64 bg-gray-900 text-white fixed h-full shadow-md z-10">
        <div class="p-6 text-2xl font-semibold tracking-wider border-b border-gray-700 mb-4">Admin Panel</div>

        <nav class="px-4 space-y-4 text-sm">
            <a th:href="@{/admin/dashboard}" class="flex items-center gap-3 hover:text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M3 12l2-2m0 0l7-7 7 7M5 10v10h14V10"/>
                </svg>
                Dashboard
            </a>
            <a th:href="@{/admin/products}" class="flex items-center gap-3 hover:text-indigo-400 font-semibold">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1z"/>
                </svg>
                Products
            </a>
            <a th:href="@{/admin/categories}" class="flex items-center gap-3 hover:text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5z"/>
                </svg>
                Categories
            </a>
            <a th:href="@{/admin/orders}" class="flex items-center gap-3 hover:text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M8 7V3m8 4V3M5 21h14V7H5z"/>
                </svg>
                Orders
            </a>
            <a th:href="@{/admin/coupons}" class="flex items-center gap-3 hover:text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 12h6m-6 4h6M9 4h6v16H9z"/>
                </svg>
                Coupons
            </a>
            <a th:href="@{/admin/wallet/transaction}" class="flex items-center gap-3 text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 19V9a2 2 0 012-2h2a2 2 0 012 2v10"/>
                </svg>
                Transactions
            </a>
        </nav>

        <div class="absolute bottom-0 p-4 w-full border-t border-gray-700 flex items-center gap-3">
            <img src="/img/sarah.png" class="w-10 h-10 rounded-full" alt="User avatar">
            <div>
                <div class="text-sm font-medium">Sarah Johnson</div>
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="text-xs text-gray-400 hover:text-red-500">Logout</button>
                </form>
            </div>
        </div>
    </aside>



    <!-- Main Content -->
    <main class="flex-1 ml-64 p-4">


        <div class="bg-white shadow-md rounded-lg p-6">
            <form th:action="@{/admin/products/add}" method="post" th:object="${productDTO}" enctype="multipart/form-data">


                <div class="space-y-8">
                    <!-- General Information -->
                    <div>
                        <h2 class="text-xl font-semibold mb-4 text-gray-800">General Information</h2>
                        <div class="space-y-4">
                            <input type="hidden" name="id" th:field="*{id}">
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Product Name</label>
                                <input type="text" required th:field="*{name}" name="name" id="name"
                                       placeholder="Enter name" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                            <div>
                                <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                                <textarea placeholder="Type product description here..." rows="5" th:field="*{description}" name="description" id="description"
                                          class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Pricing -->
                    <div>
                        <h2 class="text-xl font-semibold mb-4 text-gray-800">Pricing</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="price" class="block text-sm font-medium text-gray-700 mb-1">Price</label>
                                <input type="number" required th:field="*{price}" name="price" id="price"
                                       placeholder="Type base price here..."
                                       min="0.01" step="0.01"
                                       class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                                       oninput="validatePrice(this)">
                                <small class="text-red-500" id="priceError" style="display:none;">Please enter a valid price greater than 0.</small>

                            </div>
                            <!-- Stock Field -->
                            <div>
                                <label for="stock" class="block text-sm font-medium text-gray-700 mb-1">Stock</label>
                                <input type="number" required th:field="*{stock}" name="stock" id="stock"
                                       placeholder="Type stock here..."
                                       min="0" step="1"
                                       class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                                       oninput="validateStock(this)">
                                <small class="text-red-500" id="stockError" style="display:none;">Please enter a valid stock number (0 or greater).</small>

                            </div>
                        </div>
                    </div>

                    <!-- Category Selection -->
                    <div>
                        <h2 class="text-xl font-semibold mb-4 text-gray-800">Select Category</h2>
                        <div>
                            <select th:field="*{category}" id="category" name="category"
                                    class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                                <option th:each="category : ${categories}"
                                        th:value="${category.id}"
                                        th:text="${category.name}">
                                </option>
                            </select>
                        </div>
                    </div>

                    <!-- Variants Section -->
                    <div class="mb-12">
                        <h2 class="text-lg font-semibold mb-4 text-gray-800">Product Variants</h2>
                        <div id="variantsContainer">
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <!-- Color -->
                                <div>
                                    <label for="color" class="block text-sm font-medium text-gray-700 mb-1">Color</label>
                                    <select th:field="*{color}" name="color" id="color" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                                        <option value="">Select a color</option>
                                        <option value="gold" th:selected="${productDTO.color == 'gold'}">Gold</option>
                                        <option value="silver" th:selected="${productDTO.color == 'silver'}">Silver</option>
                                        <option value="pink" th:selected="${productDTO.color == 'pink'}">Pink</option>
                                        <option value="red" th:selected="${productDTO.color == 'red'}">Red</option>
                                        <option value="blue" th:selected="${productDTO.color == 'blue'}">Blue</option>
                                        <option value="green" th:selected="${productDTO.color == 'green'}">Green</option>
                                        <option value="black" th:selected="${productDTO.color == 'black'}">Black</option>
                                        <option value="white" th:selected="${productDTO.color == 'white'}">White</option>
                                        <option value="brown" th:selected="${productDTO.color == 'brown'}">Brown</option>
                                        <option value="yellow" th:selected="${productDTO.color == 'yellow'}">yellow</option>
                                        <option value="rosegold" th:selected="${productDTO.color == 'yellow'}">Rosegold</option>


                                    </select>
                                </div>
                                <!-- Size -->
                                <div>
                                    <label for="size" class="block text-sm font-medium text-gray-700 mb-1">Size</label>
                                    <select name="size" id="size" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                                        <option value="">Select a size</option>
                                        <option value="XS" th:selected="${productDTO.size == 'XS'}">XS</option>
                                        <option value="S" th:selected="${productDTO.size == 'S'}">S</option>
                                        <option value="M" th:selected="${productDTO.size == 'M'}">M</option>
                                        <option value="L" th:selected="${productDTO.size == 'L'}">L</option>
                                        <option value="XL" th:selected="${productDTO.size == 'XL'}">XL</option>
                                        <option value="XXL" th:selected="${productDTO.size == 'XXL'}">XXL</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Button to Add More Variants -->
                        <div class="mt-4">
                            <button type="button" class="bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded transition duration-300 ease-in-out" onclick="addVariant()">
                                Add Variant
                            </button>
                        </div>
                    </div>




                    <!-- Media -->
                    <!--                <div class="mb-12">-->
                    <!--                    <h2 class="text-lg font-semibold mb-4">Image</h2>-->
                    <!--                    <div class=" border-gray-300 rounded-lg p-6 text-center">-->
                    <!--                        <input type="file"  class="custom-file-input" name="productImage" accept="image/jpeg, image/png"  id="productImage"/>-->
                    <!--                        <label class="custom-file-label " for="productImage"></label>-->
                    <!--                    </div>-->
                    <!--                    <div class="form-group">-->
                    <!--                        <img src="#" id="imgPreview" height="200px" width="200px" th:src="@{${'/productImage/' + products.imageName}}" style="margin-top: 20px" alt=" ">-->
                    <!--                    </div>-->
                    <!--                    <input type="hidden" name="imgName" th:value="${products.imageName}">-->
                    <!--                    <div class="mb-6">-->
                    <!--                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded inline-block">Submit</button>-->
                    <!--                    </div>-->
                    <!--                </div>-->

                    <div class="mb-12">
                        <h2 class="text-xl font-semibold mb-4 text-gray-800">Product Image</h2>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                            <label for="productImage" class="block">
                                <span class="text-gray-700 mb-2 block">Select an image file</span>
                                <input type="file"
                                       class="block w-full text-sm text-gray-500
                          file:mr-4 file:py-2 file:px-4
                          file:rounded-full file:border-0
                          file:text-sm file:font-semibold
                          file:bg-blue-50 file:text-blue-700
                          hover:file:bg-blue-100"
                                       name="productImage"
                                       accept="image/jpeg, image/png"
                                       id="productImage"/>
                            </label>
                        </div>
                        <!-- Preview the current image if exists -->
                        <div class="mt-4">
                            <img id="imgPreview" height="200" width="200" th:src="@{'/productImage/' + ${productDTO.imageName}}" alt="Product Image" style="display: [[${productDTO.imageName} != null ? 'block' : 'none']]">
                        </div>
                    </div>
                    <input type="hidden" name="imgName" th:value="${productDTO.imageName}">
                </div>
                    </div>

                    <!-- Submit button placed at the bottom -->
                    <div class="mt-8">
                        <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-2 rounded transition duration-300 ease-in-out">
                            Submit
                        </button>
                    </div>
                </div>

            </form>
        </div>
</main>
</div>
<script>
    function addVariant() {
        const container = document.getElementById('variantsContainer');
        const newVariant = container.children[0].cloneNode(true);

        // Clear the selected values
        newVariant.querySelectorAll('select').forEach(select => {
            select.selectedIndex = 0;
        });

        container.appendChild(newVariant);
    }
        function validatePrice(input) {
        const price = parseFloat(input.value);
        const errorElement = document.getElementById('priceError');

        if (isNaN(price) || price <= 0) {
            errorElement.style.display = 'block';
        } else {
            errorElement.style.display = 'none';
        }
    }

    function validateStock(input) {
        const stock = parseInt(input.value, 10);
        const errorElement = document.getElementById('stockError');

        if (isNaN(stock) || stock < 0) {
            errorElement.style.display = 'block';
        } else {
            errorElement.style.display = 'none';
        }
    }

</script>

</body>
</html>

































































<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>Add product</title>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport"-->
<!--          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">-->
<!--    <meta http-equiv="X-UA-Compatible" content="ie=edge">-->
<!--    <link rel="stylesheet" data-th-href="@{'/css/style.css'}">-->
<!--    <script src="https://cdn.tailwindcss.com"></script>-->
<!--    <script>-->
<!--        tailwind.config = {-->
<!--          theme: {-->
<!--            extend: {-->
<!--              colors: {-->
<!--                clifford: '#da373d',-->
<!--              }-->
<!--            }-->
<!--          }-->
<!--        }-->
<!--    </script>-->
<!--    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp,container-queries"></script>-->
<!--    <style type="text/tailwindcss">-->
<!--        @layer utilities {-->
<!--          .content-auto {-->
<!--            content-visibility: auto;-->
<!--          }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->

<!--<body class="bg-gray-100">-->
<!--<div class="flex">-->
<!--    &lt;!&ndash; Sidebar &ndash;&gt;-->
<!--    <aside class="w-64 bg-gray-800 h-screen shadow-md">-->
<!--        <nav class="p-5 space-y-2">-->
<!--            <a th:href="@{/admin/dashboard}" class="block py-2 px-4 text-white hover:bg-blue-500 rounded">Dashboard</a>-->
<!--            <a th:href="@{/admin/products}" class="block py-2 px-4 text-white hover:bg-blue-500 rounded">Products</a>-->
<!--            <a th:href="@{/admin/categories}" class="block py-2 px-4 text-white hover:bg-blue-500 rounded">Categories</a>-->
<!--            &lt;!&ndash; Add more menu items as needed &ndash;&gt;-->
<!--        </nav>-->
<!--    </aside>-->

<!--    &lt;!&ndash; Main Content &ndash;&gt;-->
<!--    <main class="flex-1 p-8">-->
<!--        &lt;!&ndash;   <div class="flex justify-between items-center mb-6">-->
<!--               <h1 class="text-2xl font-bold">Add Product</h1>-->
<!--               <a th:href="@{/admin/products/add}" class="bg-blue-500 text-white px-4 py-2 rounded inline-block"> Add Product</a>-->
<!--           </div>-->
<!--           &ndash;&gt;-->

<!--        <div class="bg-white shadow-md rounded-lg p-6">-->
<!--            <form th:action="@{/admin/products/add}" method="post" th:object="${productDTO}" enctype="multipart/form-data">-->
<!--                &lt;!&ndash; General Information  ectype- encryptiontype &ndash;&gt;-->
<!--                <div class="mb-6">-->
<!--                    <h2 class="text-lg font-semibold mb-4">General Information</h2>-->
<!--                    <div class="mb-4">-->
<!--                        <input type="hidden" name="id" th:field="*{id}">-->
<!--                        <label class="block text-sm font-medium mb-1">Product Name</label>-->
<!--                        <input type="text" required th:field="*{name}" name="name" id="name"-->
<!--                               placeholder="Enter name" class="w-full p-2 border rounded">-->
<!--                    </div>-->

<!--                    <div>-->
<!--                        <label class="block text-sm font-medium mb-1">Description</label>-->
<!--                        <textarea placeholder="Type product description here..." class="w-full p-2 border rounded" rows="5"  th:field="*{description}" name="description" id="description"></textarea>-->
<!--                    </div>-->
<!--                </div>-->

<!--                &lt;!&ndash; Pricing &ndash;&gt;-->
<!--                <div class="mb-6">-->
<!--                    <h2 class="text-lg font-semibold mb-4">Pricing</h2>-->
<!--                    <div class="grid grid-cols-2 gap-4">-->
<!--                        <div>-->
<!--                            <label for="price" class="block text-sm font-medium mb-1">Price</label>-->
<!--                            <input type="number" required th:field="*{price}" name="price" id="price" placeholder="Type base price here..." class="w-full p-2 border rounded">-->
<!--                        </div>-->

<!--                    </div>-->

<!--                    <div class="grid grid-cols-2 gap-4">-->
<!--                        <div>-->
<!--                            <label for="stock" class="block text-sm font-medium mb-1">Stock</label>-->
<!--                            <input type="text" required th:field="*{stock}" name="stock" id="stock" placeholder="Type stock here..." class="w-full p-2 border rounded">-->
<!--                        </div>-->

<!--                    </div>-->

<!--                    <div class="grid grid-cols-2 gap-4">-->
<!--                        <div>-->
<!--                            <label for="price" class="block text-sm font-medium mb-1">Status</label>-->
<!--                            <input type="text" required th:field="*{status}" name="stock" id="status" placeholder="Type status of product..." class="w-full p-2 border rounded">-->
<!--                        </div>-->

<!--                    </div>-->
<!--                </div>-->

<!--                &lt;!&ndash; Inventory &ndash;&gt;-->
<!--                <div>-->
<!--                    <h2 class="text-lg font-semibold mb-4">Select Category</h2>-->
<!--                    <div class="grid grid-cols-3 gap-4">-->
<!--                        <select class="form-control" th:field="*{category}" id="category" name="category">-->
<!--                            <option th:each="category :${categories}"-->
<!--                                    th:value="${category.id}"-->
<!--                                    th:text="${category.name}"-->
<!--                            >-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </div>-->


<!--                &lt;!&ndash; Media &ndash;&gt;-->
<!--                <div class="mb-12">-->
<!--                    <h2 class="text-lg font-semibold mb-4">Image</h2>-->
<!--                    <div class=" border-gray-300 rounded-lg p-6 text-center">-->
<!--                        <input type="file"  class="custom-file-input" name="productImage" accept="image/jpeg, image/png"  id="productImage"/>-->
<!--                        <label class="custom-file-label " for="productImage"></label>-->
<!--                    </div>-->
<!--                    <div class="form-group">-->
<!--                        <img src="#" id="imgPreview" height="200px" width="200px" th:src="@{${'/productImage/' + productDTO.imageName}}" style="margin-top: 20px" alt=" ">-->
<!--                    </div>-->
<!--                    <input type="hidden" name="imgName" th:value="${productDTO.imageName}">-->
<!--                    <div class="mb-6">-->
<!--                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded inline-block">Submit</button>-->
<!--                        <div>-->

<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </form>-->
<!--        </div>-->
<!--    </main>-->
<!--</div>-->


<!--</body>-->
<!--</html>-->


<!--th:action="@{/admin/products/add}" method="post" th:object="${productDTO}" enctype="multipart/form-data"-->