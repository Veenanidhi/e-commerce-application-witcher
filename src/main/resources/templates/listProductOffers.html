<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Offers</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100">
<div class="flex">
    <!-- Sidebar -->
    <aside class="w-64 bg-gray-900 text-white fixed h-full shadow-md z-10">
        <div class="p-6 text-2xl font-semibold tracking-wider border-b border-gray-700 mb-4">Admin Panel</div>

        <nav class="px-4 space-y-4 text-sm">
            <a th:href="@{/admin/dashboard}" class="flex items-center gap-3 hover:text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M3 12l2-2m0 0l7-7 7 7M5 10v10h14V10"/>
                </svg>
                Dashboard
            </a>
            <a th:href="@{/admin/products}" class="flex items-center gap-3 hover:text-indigo-400 font-semibold">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1z"/>
                </svg>
                Products
            </a>
            <a th:href="@{/admin/categories}" class="flex items-center gap-3 hover:text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5z"/>
                </svg>
                Categories
            </a>
            <a th:href="@{/admin/orders}" class="flex items-center gap-3 hover:text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M8 7V3m8 4V3M5 21h14V7H5z"/>
                </svg>
                Orders
            </a>
            <a th:href="@{/admin/coupons}" class="flex items-center gap-3 hover:text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 12h6m-6 4h6M9 4h6v16H9z"/>
                </svg>
                Coupons
            </a>
            <a th:href="@{/admin/wallet/transaction}" class="flex items-center gap-3 text-indigo-400 transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 19V9a2 2 0 012-2h2a2 2 0 012 2v10"/>
                </svg>
                Transactions
            </a>
        </nav>

        <div class="absolute bottom-0 p-4 w-full border-t border-gray-700 flex items-center gap-3">
            <img src="/img/sarah.png" class="w-10 h-10 rounded-full" alt="User avatar">
            <div>
                <div class="text-sm font-medium">Sarah Johnson</div>
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="text-xs text-gray-400 hover:text-red-500">Logout</button>
                </form>
            </div>
        </div>
    </aside>

    <div class="flex-grow ml-64 p-6">
 <div class="container mx-auto mt-10 p-6 bg-white rounded-lg shadow-lg">

    <h3 class="text-4xl text-gray-800 mb-8 text-center">Product Offers List</h3>

     <div class="flex justify-between items-center mb-6">
         <div>
             <a th:href="@{/admin/offers/addProductOffer}" class="bg-blue-500 text-white px-4 py-2 rounded inline-block">+ Add Product</a>
         </div>
     </div>

    <!-- Table for Product Offers -->
    <div class="overflow-x-auto">
        <table class="min-w-full bg-gray-50 border border-gray-200 rounded-lg shadow-lg">
            <thead>
            <tr class="bg-blue-600 text-white text-left">
                <th class="py-3 px-4 border-b font-semibold text-lg">Offer ID</th>
                <th class="py-3 px-4 border-b font-semibold text-lg">Offer Name</th>
                <th class="py-3 px-4 border-b font-semibold text-lg">Product</th>
                <th class="py-3 px-4 border-b font-semibold text-lg">Discount</th>
                <th class="py-3 px-4 border-b font-semibold text-lg">Start Date</th>
                <th class="py-3 px-4 border-b font-semibold text-lg">Expiry Date</th>
                <th class="py-3 px-4 border-b font-semibold text-lg">Actions</th>
            </tr>
            </thead>
            <tbody>
            <!-- Loop through productOfferList -->
<!--            <tr th:each="offer : ${productOfferList}" class="hover:bg-gray-100 transition duration-300">-->
            <tr th:each="offer : ${productOfferPage.content}" class="hover:bg-gray-100 transition duration-300">
            <td class="py-3 px-4 border-b text-gray-700" th:text="${offer.productOfferId}"></td>
                <td class="py-3 px-4 border-b text-gray-700" th:text="${offer.productOfferName}"></td>
                <td class="py-3 px-4 border-b text-gray-700">
                    <ul>
                        <li th:each="product : ${offer.products}" th:text="${product.name}"></li>
                        <li th:if="${offer.products.empty}" class="text-gray-500">No Products</li>
                    </ul>
                </td>
                <td class="py-3 px-4 border-b text-gray-700" th:text="${offer.discountPercentage}"></td>
                <td class="py-3 px-4 border-b text-gray-700" th:text="${offer.startDate}"></td>
                <td class="py-3 px-4 border-b text-gray-700" th:text="${offer.expiryDate}"></td>
                <td class="py-3 px-4 border-b text-gray-700">
                    <a th:href="@{/admin/offers/editProductOffer/{id}(id=${offer.productOfferId})}" class="text-blue-600 hover:text-blue-800 font-medium mr-2">Edit</a>
                    |
                    <a th:href="@{/admin/offers/deleteProductOffer/{id}(id=${offer.productOfferId})}"
                       class="text-red-600 hover:text-red-800 font-medium ml-2"
                       onclick="return confirm('Are you sure you want to delete this offer?');">Delete</a>
                </td>
            </tr>
            </tbody>
        </table>
        <!-- Pagination -->
        <div class="flex justify-center mt-6 space-x-2">
            <a th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
               th:href="@{/admin/offers/listProductOffers(page=${i}, size=5)}"
               th:text="${i + 1}"
               th:classappend="${i} == ${currentPage} ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'"
               class="px-3 py-1 rounded-md hover:bg-blue-500 hover:text-white transition duration-200"></a>
        </div>

    </div>

</div>
</div>
</div>
</body>
</html>
